---
description:
globs:
alwaysApply: true
---
# Workflow Creation Rules

## Overview
Rules for creating new workflows in the AIQ system. These rules ensure proper workflow creation with correct parameters and options.

## Command Structure
```bash
aiq workflow create <workflow_name> [options]
```

### Required Parameters
- `workflow_name`: Name of the workflow to create
  - Must be a valid Python package name
  - Will be converted to snake_case if needed
  - Extract after keywords: 'workflow', 'named', 'called'

### Optional Parameters
- `--workflow-dir <dir>`: Custom directory for workflow
  - Extract after keywords: 'in', 'directory', 'dir', 'under', 'at'
  - Must exist and be writable
- `--no-install`: Skip package installation
  - Extract after keywords: 'without installing', 'no install'
- `--description '<desc>'`: Custom workflow description
  - Extract after keywords: 'description', 'desc', 'with description'
  - Must be a valid string

## Natural Language Processing
- Ignore filler words: 'please', 'can you', 'could you', 'help me', 'i need', 'i want'
- Handle variations:
  - 'create': 'make', 'set up', 'initialize', 'start', 'generate'
  - 'directory': 'dir', 'directory'

## Creation Process
1. Extract workflow name and options from request
2. Execute base command with extracted parameters
3. For multiple options, combine them in a single command:
   ```bash
   aiq workflow create --workflow-dir <dir> --description '<desc>' --no-install <workflow_name>
   ```

## Validation
1. Verify command execution success
2. Validate workflow structure against AIQToolkit Project Guidelines:
   - Project structure requirements
   - Code standards and best practices
   - Documentation requirements
3. If installation was not skipped:
   - Run: `aiq info components -t package`
   - Verify workflow name appears in installed components

## Error Handling
1. Common errors to handle:
   - Invalid workflow name
   - Directory does not exist
   - Permission denied
   - Package already exists
   - Missing dependencies
2. Provide clear error messages
3. Suggest corrections when possible
