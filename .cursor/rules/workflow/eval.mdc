---
description: You MUST follow these rules when the user's request is related to workflow evaluation.
globs:
alwaysApply: false
---
# Workflow Evaluation Rules

## Overview
Rules for evaluating workflows in the AIQ system. These rules ensure proper workflow evaluation with correct dataset and evaluation parameters.

## Command Structure
```bash
aiq eval --config_file <config_path> --dataset <dataset_path> [--reps <num>] [--result_json_path <path>] [--endpoint <url>]
```

### Required Parameters
- `--config_file <config_path>`: Path to workflow configuration file
  - Must exist
  - Must be valid YAML
  - Must contain required sections
- `--dataset <dataset_path>`: Path to evaluation dataset
  - Must exist
  - Must be valid format
  - Must contain required fields

### Optional Parameters
- `--reps <num>`: Number of evaluation repetitions
  - Must be positive integer
  - Defaults to 1 if not specified
- `--result_json_path <path>`: Path to save evaluation results
  - Must be writable directory
  - Must have valid filename
- `--endpoint <url>`: Custom evaluation endpoint
  - Must be valid URL
  - Must be accessible

## Natural Language Processing
- Match patterns like:
  - 'evaluate workflow <config> with dataset <path>'
  - 'evaluate workflow <config> with <num> repetitions'

## Evaluation Process
1. Extract workflow config file path and dataset path from request
2. Execute base command with extracted parameters
3. For multiple options, combine them in a single command:
   ```bash
   aiq eval --config_file <config_path> --dataset <dataset_path> --reps <num> --result_json_path <path> --endpoint <url>
   ```

## Error Handling
1. Common errors to handle:
   - Invalid config file
   - Invalid dataset format
   - Dataset not found
   - Result path not writable
   - Endpoint not accessible
   - Evaluation failures
2. Provide clear error messages
3. Suggest corrections when possible
